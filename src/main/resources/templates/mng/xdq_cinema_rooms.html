<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
    <title>影院管理</title>
    <link rel="icon" href="favicon.ico" type="image/ico">
    <meta name="author" content="Yodo">
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/materialdesignicons.min.css" rel="stylesheet">
    <link href="css/style.min.css" rel="stylesheet">

    <script src="js/vue.js"></script>
    <script src="js/axios.js"></script>

    <!--对话框-->
    <link rel="stylesheet" href="js/jconfirm/jquery-confirm.min.css">
</head>

<body data-theme="default">
<div class="lyear-layout-web">
    <div class="lyear-layout-container">
        <!--左侧导航-->
        <aside class="lyear-layout-sidebar">

            <!-- logo -->
            <div id="logo" class="sidebar-header">

                <a href="index_xdq_new.html"><img src="images/Cinema_logo_small_new.png" title="LightYear" alt="LightYear" /></a>
            </div>
            <div class="lyear-layout-sidebar-scroll">

                <nav class="sidebar-main">
                    <ul class="nav nav-drawer">
                        <li class="nav-item"> <a href="index_xdq_new.html"><i class="mdi mdi-home"></i> 影院管理首页</a> </li>
                        <li class="nav-item"> <a href="xdq_cinema_arrangements.html"><i class="mdi mdi-table"></i> 影院排片管理</a> </li>
                        <li class="nav-item active"> <a href="xdq_cinema_rooms.html"><i class="mdi mdi-home-circle"></i> 影院影厅管理</a> </li>
                        <li class="nav-item"> <a href="xdq_cinema_comments.html"><i class="mdi mdi-comment"></i> 影院评论管理</a> </li>
                    </ul>
                </nav>




            </div>

        </aside>
        <!--End 左侧导航-->

        <!--头部信息-->
        <header class="lyear-layout-header">

            <nav class="navbar navbar-default">
                <div class="topbar">

                    <div class="topbar-left">
                        <div class="lyear-aside-toggler">
                            <span class="lyear-toggler-bar"></span>
                            <span class="lyear-toggler-bar"></span>
                            <span class="lyear-toggler-bar"></span>
                        </div>
                        <span class="navbar-page-title"> 影院影厅管理 </span>
                    </div>

                    <ul class="topbar-right">
                        <li class="dropdown dropdown-profile">
                            <a href="javascript:void(0)" data-toggle="dropdown">
                                <img class="img-avatar img-avatar-48 m-r-10" src="images/users/xdq.jpg" alt="徐德全" />
                                <span>徐德全 <span class="caret"></span></span>
                            </a>
                            <ul class="dropdown-menu dropdown-menu-right">
                                <li> <a href="lyear_pages_profile.html"><i class="mdi mdi-account"></i> 个人信息</a> </li>
                                <li> <a href="lyear_pages_edit_pwd.html"><i class="mdi mdi-lock-outline"></i> 修改密码</a> </li>
                                <li> <a href="javascript:void(0)"><i class="mdi mdi-delete"></i> 清空缓存</a></li>
                                <li class="divider"></li>
                                <li> <a href="lyear_pages_login.html"><i class="mdi mdi-logout-variant"></i> 退出登录</a> </li>
                            </ul>
                        </li>
                        <!--切换主题配色-->
                        <li class="dropdown dropdown-skin">
                            <span data-toggle="dropdown" class="icon-palette"><i class="mdi mdi-palette"></i></span>
                            <ul class="dropdown-menu dropdown-menu-right" data-stopPropagation="true">
                                <li class="drop-title"><p>主题</p></li>
                                <li class="drop-skin-li clearfix">
                  <span>
                    <input type="radio" name="site_theme" value="default" id="site_theme_1" checked>
                    <label for="site_theme_1"></label>
                  </span>
                                    <span class="inverse">
                    <input type="radio" name="site_theme" value="dark" id="site_theme_2" checked>
                    <label for="site_theme_2"></label>
                  </span>
                                    <span>
                    <input type="radio" name="site_theme" value="translucent" id="site_theme_3">
                    <label for="site_theme_3"></label>
                  </span>
                                </li>
                                <li class="drop-title"><p>LOGO</p></li>
                                <li class="drop-skin-li clearfix">
                  <span class="inverse">
                    <input type="radio" name="logo_bg" value="default" id="logo_bg_1" checked>
                    <label for="logo_bg_1"></label>
                  </span>
                                    <span>
                    <input type="radio" name="logo_bg" value="color_2" id="logo_bg_2">
                    <label for="logo_bg_2"></label>
                  </span>
                                    <span>
                    <input type="radio" name="logo_bg" value="color_3" id="logo_bg_3">
                    <label for="logo_bg_3"></label>
                  </span>
                                    <span>
                    <input type="radio" name="logo_bg" value="color_4" id="logo_bg_4">
                    <label for="logo_bg_4"></label>
                  </span>
                                    <span>
                    <input type="radio" name="logo_bg" value="color_5" id="logo_bg_5">
                    <label for="logo_bg_5"></label>
                  </span>
                                    <span>
                    <input type="radio" name="logo_bg" value="color_6" id="logo_bg_6">
                    <label for="logo_bg_6"></label>
                  </span>
                                    <span>
                    <input type="radio" name="logo_bg" value="color_7" id="logo_bg_7">
                    <label for="logo_bg_7"></label>
                  </span>
                                    <span>
                    <input type="radio" name="logo_bg" value="color_8" id="logo_bg_8">
                    <label for="logo_bg_8"></label>
                  </span>
                                </li>
                                <li class="drop-title"><p>头部</p></li>
                                <li class="drop-skin-li clearfix">
                  <span class="inverse">
                    <input type="radio" name="header_bg" value="default" id="header_bg_1" checked>
                    <label for="header_bg_1"></label>
                  </span>
                                    <span>
                    <input type="radio" name="header_bg" value="color_2" id="header_bg_2">
                    <label for="header_bg_2"></label>
                  </span>
                                    <span>
                    <input type="radio" name="header_bg" value="color_3" id="header_bg_3">
                    <label for="header_bg_3"></label>
                  </span>
                                    <span>
                    <input type="radio" name="header_bg" value="color_4" id="header_bg_4">
                    <label for="header_bg_4"></label>
                  </span>
                                    <span>
                    <input type="radio" name="header_bg" value="color_5" id="header_bg_5">
                    <label for="header_bg_5"></label>
                  </span>
                                    <span>
                    <input type="radio" name="header_bg" value="color_6" id="header_bg_6">
                    <label for="header_bg_6"></label>
                  </span>
                                    <span>
                    <input type="radio" name="header_bg" value="color_7" id="header_bg_7">
                    <label for="header_bg_7"></label>
                  </span>
                                    <span>
                    <input type="radio" name="header_bg" value="color_8" id="header_bg_8">
                    <label for="header_bg_8"></label>
                  </span>
                                </li>
                                <li class="drop-title"><p>侧边栏</p></li>
                                <li class="drop-skin-li clearfix">
                  <span class="inverse">
                    <input type="radio" name="sidebar_bg" value="default" id="sidebar_bg_1" checked>
                    <label for="sidebar_bg_1"></label>
                  </span>
                                    <span>
                    <input type="radio" name="sidebar_bg" value="color_2" id="sidebar_bg_2">
                    <label for="sidebar_bg_2"></label>
                  </span>
                                    <span>
                    <input type="radio" name="sidebar_bg" value="color_3" id="sidebar_bg_3">
                    <label for="sidebar_bg_3"></label>
                  </span>
                                    <span>
                    <input type="radio" name="sidebar_bg" value="color_4" id="sidebar_bg_4">
                    <label for="sidebar_bg_4"></label>
                  </span>
                                    <span>
                    <input type="radio" name="sidebar_bg" value="color_5" id="sidebar_bg_5">
                    <label for="sidebar_bg_5"></label>
                  </span>
                                    <span>
                    <input type="radio" name="sidebar_bg" value="color_6" id="sidebar_bg_6">
                    <label for="sidebar_bg_6"></label>
                  </span>
                                    <span>
                    <input type="radio" name="sidebar_bg" value="color_7" id="sidebar_bg_7">
                    <label for="sidebar_bg_7"></label>
                  </span>
                                    <span>
                    <input type="radio" name="sidebar_bg" value="color_8" id="sidebar_bg_8">
                    <label for="sidebar_bg_8"></label>
                  </span>
                                </li>
                            </ul>
                        </li>
                        <!--切换主题配色-->
                    </ul>

                </div>
            </nav>

        </header>
        <!--End 头部信息-->

        <!--页面主要内容-->
        <main class="lyear-layout-content">

            <div class="container-fluid">

                <div class="row">
                    <div class="col-lg-12">
                        <div class="card">
                            <div class="card-toolbar clearfix">
                                <form class="pull-right search-bar" method="get" action="#!" role="form">
                                    <div class="input-group">
                                        <div class="input-group-btn">
                                            <input type="hidden" name="search_field" id="search-field" value="title">
                                            <button class="btn btn-default dropdown-toggle" id="search-btn" data-toggle="dropdown" type="button" aria-haspopup="true" aria-expanded="false">
                                                标题 <span class="caret"></span>
                                            </button>
                                            <ul class="dropdown-menu">
                                                <li> <a tabindex="-1" href="javascript:void(0)" data-field="title">标题</a> </li>
                                                <li> <a tabindex="-1" href="javascript:void(0)" data-field="cat_name">栏目</a> </li>
                                            </ul>
                                        </div>
                                        <input type="text" class="form-control" value="" name="keyword" placeholder="请输入名称">
                                    </div>
                                </form>


                                <div class="toolbar-btn-action">
                                    <a class="btn btn-success m-r-5 example-p-3" href="xdq_cinema_rooms_add.html"><i class="mdi mdi-plus"></i> 新增影厅</a>
                                    <a class="btn btn-danger" href="#!"><i class="mdi mdi-window-close"></i> 删除影厅</a>
                                </div>
                            </div>


                            <div class="card-body" id="hall">
                                <div class="table-responsive">
                                    <table class="table table-bordered">
                                        <thead>
                                        <tr>
                                            <th>
                                                <label class="lyear-checkbox checkbox-primary">
                                                    <input type="checkbox" id="check-all"><span></span>
                                                </label>
                                            </th>
                                            <th>编号</th>
                                            <th>名称</th>
                                            <th>类型</th>
                                            <th>座位行数</th>
                                            <th>座位列数</th>
                                            <th>所属影院</th>
                                            <th>补充信息</th>
                                            <th>影厅状态</th>
                                            <th>编辑</th>
                                        </tr>
                                        </thead>
                                        <tbody>
                                        <tr>
                                            <td>
                                                <label class="lyear-checkbox checkbox-primary">
                                                    <input type="checkbox" name="ids[]" value="1"><span></span>
                                                </label>
                                            </td>
                                            <td>1</td>
                                            <td>3D影厅1号</td>
                                            <td>3D</td>
                                            <td>18行</td>
                                            <td>22列</td>
                                            <td>北京第一影院</td>
                                            <td>地理位置最好</td>
                                            <td><font class="text-success">放映中</font></td>
                                            <td>
                                                <div class="btn-group">
                                                    <a class="btn btn-xs btn-default" href="#!" title="编辑" data-toggle="tooltip"><i class="mdi mdi-pencil"></i></a>
                                                    <a class="btn btn-xs btn-default" href="#!" title="删除" data-toggle="tooltip"><i class="mdi mdi-window-close"></i></a>
                                                </div>
                                            </td>
                                        </tr>
                                        <tr v-for="hall in info">
                                            <td>
                                                <label class="lyear-checkbox checkbox-primary">
                                                    <input type="checkbox" name="ids[]" value="1"><span></span>
                                                </label>
                                            </td>
                                            <td>{{ hall.id }}</td>
                                            <td>{{ hall.hallName }}影厅</td>
                                            <td>{{ hall.hallType }}</td>
                                            <td>{{ hall.row }}行</td>
                                            <td>{{ hall.col }}列</td>
                                            <td>{{ hall.cinema.cinemaName }}影院</td>
                                            <td>{{ hall.cinema.cinemaDescription }}</td>
                                            <td><font class="text-success">放映中</font></td>
                                            <td>
                                                <div class="btn-group">
                                                    <a class="btn btn-xs btn-default" v-on:click="updateHall(hall.cinema.id,hall.col,hall.id,hall.hallName,hall.hallType,hall.layout,hall.row)" title="编辑" data-toggle="tooltip"><i class="mdi mdi-pencil"></i></a>
                                                    <a class="btn btn-xs btn-default" v-on:click="deleteHall(hall.id)" title="删除" data-toggle="tooltip"><i class="mdi mdi-window-close"></i></a>
                                                </div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <label class="lyear-checkbox checkbox-primary">
                                                    <input type="checkbox" name="ids[]" value="1"><span></span>
                                                </label>
                                            </td>
                                            <td>2</td>
                                            <td>3D影厅2号</td>
                                            <td>3D</td>
                                            <td>19行</td>
                                            <td>21列</td>
                                            <td>北京第一影院</td>
                                            <td>地理位置一般</td>
                                            <td><font class="text-warning">闲置中</font></td>
                                            <td>
                                                <div class="btn-group">
                                                    <a class="btn btn-xs btn-default" href="#!" title="编辑" data-toggle="tooltip"><i class="mdi mdi-pencil"></i></a>
                                                    <a class="btn btn-xs btn-default" href="#!" title="删除" data-toggle="tooltip"><i class="mdi mdi-window-close"></i></a>
                                                </div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <label class="lyear-checkbox checkbox-primary">
                                                    <input type="checkbox" name="ids[]" value="1"><span></span>
                                                </label>
                                            </td>
                                            <td>3</td>
                                            <td>2D影厅1号</td>
                                            <td>2D</td>
                                            <td>12行</td>
                                            <td>18列</td>
                                            <td>北京第一影院</td>
                                            <td>地理位置最差</td>
                                            <td><font class="text-danger">故障中</font></td>
                                            <td>
                                                <div class="btn-group">
                                                    <a class="btn btn-xs btn-default" href="#!" title="编辑" data-toggle="tooltip"><i class="mdi mdi-pencil"></i></a>
                                                    <a class="btn btn-xs btn-default" href="#!" title="删除" data-toggle="tooltip"><i class="mdi mdi-window-close"></i></a>
                                                </div>
                                            </td>
                                        </tr>
                                        </tbody>
                                    </table>
                                </div>
                                <ul class="pagination">
                                    <li class="disabled"><span>«</span></li>
                                    <li class="active"><span>1</span></li>
                                    <li><a href="#1">2</a></li>
                                    <li><a href="#1">3</a></li>
                                    <li><a href="#1">4</a></li>
                                    <li><a href="#1">5</a></li>
                                    <li><a href="#1">6</a></li>
                                    <li><a href="#1">7</a></li>
                                    <li><a href="#1">8</a></li>
                                    <li class="disabled"><span>...</span></li>
                                    <li><a href="#!">14452</a></li>
                                    <li><a href="#!">14453</a></li>
                                    <li><a href="#!">»</a></li>
                                </ul>

                            </div>
                        </div>
                    </div>

                </div>

            </div>

        </main>
        <!--End 页面主要内容-->
    </div>
</div>

<script type="text/javascript" src="js/jquery.min.js"></script>
<script type="text/javascript" src="js/bootstrap.min.js"></script>
<script type="text/javascript" src="js/perfect-scrollbar.min.js"></script>
<script type="text/javascript" src="js/main.min.js"></script>


<script src="js/jconfirm/jquery-confirm.min.js"></script>
<script type="text/javascript" src="js/main.min.js"></script>
<!--<script type="text/javascript">-->
    <!--$('.example-p-3').on('click', function () {-->
        <!--$.confirm({-->
            <!--title: '新建影片',-->
            <!--content: '' +-->
                <!--'<form action="" class="formName">' +-->
                <!--'<div class="form-group">' +-->
                <!--'<label>请输入影厅名称</label>' +-->
                <!--'<input type="text" placeholder="影厅名称" class="name form-control" required />' +-->
                <!--'<label>请输入影厅类型</label>' +-->
                <!--'<input type="text" placeholder="影厅类型" class="name form-control" required />' +-->
                <!--'<label>请设置座位行数</label>' +-->
                <!--'<input type="text" placeholder="座位行数" class="name form-control" required />' +-->
                <!--'<label>请设置座位列数</label>' +-->
                <!--'<input type="text" placeholder="座位列数" class="name form-control" required />' +-->
                <!--'<label>请设置所属影院</label>' +-->
                <!--'<input type="text" placeholder="所属影院" class="name form-control" required />' +-->
                <!--'<label>请补充相关信息</label>' +-->
                <!--'<input type="text" placeholder="相关信息" class="name form-control" required />' +-->
                <!--'</div>' +-->
                <!--'</form>',-->
            <!--buttons: {-->
                <!--formSubmit: {-->
                    <!--text: '提交',-->
                    <!--btnClass: 'btn-blue',-->
                    <!--action: function () {-->
                        <!--var name = this.$content.find('.name').val();-->
                        <!--if(!name){-->
                            <!--$.alert('请您输入影厅名称');-->
                            <!--return false;-->
                        <!--}-->
                        <!--$.alert('新建影厅名称是： ' + name);-->
                    <!--}-->
                <!--},-->
                <!--cancel: {-->
                    <!--text: '取消'-->
                <!--},-->
            <!--},-->
            <!--onContentReady: function () {-->
                <!--var jc = this;-->
                <!--this.$content.find('form').on('submit', function (e) {-->
                    <!--e.preventDefault();-->
                    <!--jc.$$formSubmit.trigger('click');-->
                <!--});-->
            <!--}-->
        <!--});-->
    <!--});-->
<!--</script>-->

<script type="text/javascript">
    $(function(){
        $('.search-bar .dropdown-menu a').click(function() {
            var field = $(this).data('field') || '';
            $('#search-field').val(field);
            $('#search-btn').html($(this).text() + ' <span class="caret"></span>');
        });
    });
</script>

<script type = "text/javascript">

    new Vue({
        el: '#hall',
        data () {
            return {
                info: null
            }
        },
        methods:{
            // 时间戳转为中文输出
            getTime:function(t){
                var _time=new Date(t);
                var   year=_time.getFullYear();//2017
                var   month=_time.getMonth()+1;//7
                var   date=_time.getDate();//10
                var   hour=_time.getHours();//10
                var   minute=_time.getMinutes();//56
                var   second=_time.getSeconds();//15
                return   year+"年"+month+"月"+date+"日   "+hour+":"+minute;//这里自己按自己需要的格式拼接
            },

            updateHall: function(cinemaId,col,hallId,hallName,hallType,layout,row){
                window.location.href = "http://localhost:8081/mng/xdq_cinema_rooms_update.html?cinemaId="+cinemaId+"&col="+col+"&hallId="+hallId+"&hallName="+hallName+"&hallType="+hallType+"&layout="+layout+"&row="+row;
            },

            deleteHall: function(hallId){
                alert("删除成功");

                axios.delete("http://localhost:8081/cinemaHall/del?hallId="+hallId,
                    {
                        headers: {
                            'Access-Control-Allow-Origin': '*',
                        },
                        crossdomain: true,
                    }
                )
                    .then(response => {console.log(response)
                        console.log(this.schedule)
                        // alert("添加成功！")
                        // self.location = "xdq_cinema_arrangements.html";
                    })
                    .catch(function (error) { // 请求失败处理
                        console.log(error);
                    });
                window.location.href = "http://localhost:8081/mng/xdq_cinema_rooms.html"
            },
        },
        mounted () {
            axios
                .get('http://localhost:8081/cinemaHall/getList?cinema_id=1')
                .then(response => (this.info = response.data.data))
        }
    })
</script>
</body>
</html>